<header>
  <h1 i18n="login-header">Login</h1>
  <p i18n="login-description">Comment on my blogs, Maybe even get a chance to write your own.</p>
</header>
<main>
  <form [formGroup]="loginForm" #formDir="ngForm" (ngSubmit)="onSubmit(loginForm.value)">
    <section [hidden]="formDir.submitted">
      <h2 i18n="login-logindetails">Login details</h2>
      <fieldset>
        <p>
          <label for="username">
            <span i18n="login-username">Username:</span>
            <strong
              ><span class="required" aria-label="required">*</span></strong
            >
          </label>
          <input
            id="username"
            formControlName="username"
            placeholder="jane013"
            name="text"
            type="text"
          />
          @if(username?.invalid && (username?.dirty || username?.touched)) {
            @if(username?.hasError("required")) {
            <span class="form-error">A Username is required</span>
            }
          }
        </p>
        <p>
          <label for="password">
            <span i18n="login-password">Password:</span>
            <strong
              ><span class="required" aria-label="required">*</span></strong
            >
          </label>
          <input
            placeholder="********"
            minlength=8
            id="password"
            name="password"
            formControlName="password"
            type="password"
          />
          @if(password?.invalid && (password?.dirty || password?.touched)) {
            @if(password?.hasError("required")) {
              <span class="form-error" i18n="login-password-required-error">
                A password is required
              </span> 
            }
            @if(password?.hasError("minlength")) {
                <span class="form-error" i18n="login-password-length-error">
                    A password should be atleast 8 characters long
                </span>
            }
            @if(password?.hasError("pattern")) {
              <span class="form-error" i18n="login-password-validation-error">
                   Password should contain atleast a lower case character, upper case character,
                   numbers and a special character
              </span>
            }
          }
        </p>
      </fieldset>

      <section class="form-controls">
        <button [disabled]="formDir.invalid" type="submit">Submit</button>
        <button type="reset" class="secondary">Clear</button>
      </section>

      <section class="form-footer">
        <small><a [routerLink]="'/register'" alt="register" i18n="login-register">dont have an account?</a></small>
      </section>
    </section>
    
    <section [hidden]="!formDir.submitted">
      <div>Login request sent</div>
    </section>
  </form>
</main>
